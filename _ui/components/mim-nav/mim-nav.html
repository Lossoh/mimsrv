<link rel="import" href="../../modules/api-manager/api-manager.html">

<link rel="import" href="../../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/polymer-decorators/polymer-decorators.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="mim-nav">
  <template>
    <style>
      :host {
        background-color: white;
      }
      .nav-item {
        min-height: 0;
        padding-left: 0px;
        border: 1px black solid;
        line-height: 1;
      }
      .dir {
        background-color: lightblue;
      }
      .selected {
        background-color: lightgreen;
      }
      .path {
        font-weight: bold;
      }
      .size, .date {
        font-size: small;
      }
      .date {
        font-style: italic;
      }
      .text {
        white-space: normal;
      }
      .textError {
        color: red;
        white-space: normal;
      }
      paper-item {
        --paper-item-focused-before: {
          background-color: white;
        }
      }
      .invisible {
        opacity: 0;
      }
    </style>
    <div id="listContainer">
      <template is="dom-repeat" id="list" items="[[rows]]" as="row">
        <paper-item on-click="rowClicked" class$="[[getRowClass(row, selectedIndex)]]">
          <span class="spacer">
            <template is="dom-repeat" items="[[indentsForRow(row)]]">
              &nbsp;
            </template>
            <span hidden$=[[!row.isDir]]>
              <iron-icon icon="hardware:keyboard-arrow-right"
                  hidden$=[[row.expanded]] on-click="rowToggled"></iron-icon>
              <iron-icon icon="hardware:keyboard-arrow-down"
                  hidden$=[[!row.expanded]] on-click="rowToggled"></iron-icon>
            </span>
            <span class="invisible" hidden$=[[row.isDir]]>
              <!-- We put this invisible icon here to get the spacing right. -->
              <iron-icon icon="hardware:keyboard-arrow-left"></iron-icon>
            </span>
          </span>
          <span hidden$=[[row.isDir]]>
            <span class="path">[[row.name]]</span>
            <span class="size">[[sizeAsString(row)]]</span><br>
            <span class="date">[[row.modTimeStr]]</span><br>
            <span class="text">[[row.text]]</span>
            <span class="textError">[[row.textError]]</span>
          </span>
          <span hidden$=[[!row.isDir]]>
            <span class="path">[[row.path]]</span><br>
            <span class="text">[[row.text]]</span>
            <span class="textError">[[row.textError]]</span>
          </span>
        </paper-item>
      </template>
    </div>
  </template>
</dom-module>

<script src="mim-nav.js"></script>
